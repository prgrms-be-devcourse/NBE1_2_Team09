<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>City Search</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
<h1>City Search</h1>
<form id="searchForm">
    <input type="text" id="query" name="query" placeholder="Enter city or country" required>
    <button type="submit">Search</button>
</form>

<h2>Results</h2>
<ul id="resultsList">
    <!-- 검색 결과가 여기에 표시됩니다 -->
</ul>

<script>
    $(document).ready(function() {
        $('#query').on('input', function() {
            const query = $(this).val();

            if (query.length > 0) {
                $.get('/api/cities/search', { input: query }, function(data) {
                    $('#resultsList').empty(); // 이전 결과를 지웁니다
                    data.forEach(function(result) {
                        $('#resultsList').append(`
                            <li class="result-item" data-id="${result.placeId}">
                                <h3>${result.description}</h3>
                                ${result.photoUrl ? `<img src="${result.photoUrl}" alt="Photo" />` : ''}
                            </li>
                        `);
                    });

                    // 클릭 이벤트를 각 결과 항목에 바인딩
                    $('.result-item').on('click', function() {
                        const placeId = $(this).data('id'); // data-id에서 placeId 가져오기
                        console.log('Place ID:', placeId); // 콘솔에 출력
                    });
                });
            } else {
                $('#resultsList').empty(); // 입력이 비어 있으면 결과를 지웁니다
            }
        });
    });
</script>
</body>
</html>
